<mat-card >
  <div style="padding: 0px !important">
    <div class="row align-items-center px-2" style="height: 48px;">
      <div class="col-6">
        <span class="mat-headline-5 reh-txt-blue900">ข้อมูลคนไข้</span>
      </div>
      <div class="col-6" align="end">
        <button mat-fab extended="" class="reh-btn-green" (click)="onMessageChange()">
          <mat-icon fontSet="material-icons-outlined">add</mat-icon>
          <span class="mat-subtitle-2">เจ้าหน้าที่ใหม่</span></button>
      </div>
    </div>
    <mat-divider color="primary"> </mat-divider>
    <section class="lj-container">
      <div class="row px-2 pt-3">
        <div class="col-12">
          <!-- class="reh-form-sm" -->
          <div >
            <mat-form-field class="reh-input-full-width">
              <mat-label>ค้นหา ชื่อ-สุกล</mat-label>
              <input matInput type="text" (keyup)="applyFilter($event)" [(ngModel)]="searchValue" placeholder="ค้นหา ชื่อ-สุกล" [ngModelOptions]="{ standalone: true }" #input>

              <button
              *ngIf="searchValue"
              matSuffix
              mat-icon-button
              aria-label="Clear"
              (click)="clearSearch()"
              style="margin-right: 8px;"
            >
              <mat-icon>close</mat-icon>
            </button>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <section class="example-containe"  tabindex="0">
            <table mat-table  [dataSource]="dataSource">
              <ng-container matColumnDef="hn">
                <th mat-header-cell *matHeaderCellDef>

                  <span class="mat-subtitle-2">HN</span>
                </th>
                <td mat-cell *matCellDef="let element">
                  <span class="mat-subtitle-1">{{ element.hn }}</span>
                </td>
              </ng-container>
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef>

                  <span class="mat-subtitle-2">ชื่อ-สุกล</span>
                </th>
                <td mat-cell *matCellDef="let element">

                  <span class="mat-subtitle-1"> {{ element.name }}</span>
                </td>
              </ng-container>

              <ng-container matColumnDef="tel">
                <th mat-header-cell *matHeaderCellDef>

                  <span class="mat-subtitle-2">เบอร์</span>
                </th>
                <td mat-cell *matCellDef="let element">

                  @if(element.tel != ''){

                    <span class="mat-subtitle-1"> {{ element.tel }}</span>
                  }@else {
                    <span class="mat-subtitle-1"> - </span>
                  }
                </td>
              </ng-container>


              <ng-container matColumnDef="last_date">
                <th mat-header-cell *matHeaderCellDef>
                  <span class="mat-subtitle-2">ส่งตรวจล่าสุด</span>
                </th>
                <td mat-cell *matCellDef="let element">
                  @if(element.last_date != '-'){

                    <span class="mat-subtitle-1"> {{ formatDateThai(element.last_date) }}</span>
                  }@else {
                    <span class="mat-subtitle-1"> {{ element.last_date }}</span>
                  }

                </td>
              </ng-container>
              <ng-container matColumnDef="actions" stickyEnd>
                <th mat-header-cell *matHeaderCellDef aria-label="row actions" style="text-align: center;"><span class="mat-subtitle-2">คำสั่ง</span></th>
                <td mat-cell *matCellDef="let element">
                  <div class="row">
                    <div class="col-6">
                      <button mat-mini-fab   matTooltip="แก้ไขข้อมูลคนไข้" class="reh-btn-green" (click)="clickedJob(element)">
                        <mat-icon>edit</mat-icon>
                      </button>
                    </div>
                    <div class="col-6">
                      <button  mat-mini-fab matTooltip="ส่งตรวจคนไข้" class="reh-btn-blue" (click)="btnPhistory(element.hn)">
                        <mat-icon>medical_information</mat-icon>
                      </button>
                    </div>
                  </div>


                </td>
              </ng-container>

              <tr
                mat-header-row
                *matHeaderRowDef="displayedColumns; sticky: true"
              ></tr>
              <tr
                mat-row
                *matRowDef="let row; columns: displayedColumns"
              ></tr>

              <!-- Row shown when there is no matching data. -->
              <tr class="mat-row" *matNoDataRow style="text-align: center;height: 64px;">
                <td class="mat-cell" colspan="6">ไม่พบข้อมูลที่คุณ ค้นหา "{{input.value}}"</td>
              </tr>


            </table>

            <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 15]">
            </mat-paginator>


          </section>
        </div>
      </div>
    </section>
  </div>
</mat-card>
